---
title: "How to test?"
author: "Kamil FoltyÅ„ski"
date: "09/04/2019"
output:
  html_document:
    fig_caption: yes
    keep_md: no
    toc: yes
    toc_float:
      collapsed: no
      smooth_scroll: yes
runtime: shiny
---

```{r, echo=FALSE}
knitr::opts_chunk$set(collapse = TRUE, comment = ">")
```

# How to write unit tests?

* I really encourage to write unit test just after new code is written or while writing it. 
The idea of new feature is still _warm_, _fresh_, generally well known for developer 
and developer probably encountered some edge cases/expceptions. If developer postpone writing tests for few days, 
then all of those will be probably forgotten (partially at least) 
* split big functionalities into separate tests, e.g. 
1st test: test connection to database, 
2nd test: test function's output on prepared reference data from database
* expect, expect, expect
  
# How to measure tests coverage?

We can use `covr` R package:

```{r}
code_coverage_summary <- covr::package_coverage("unitTestsWorkshopPackage/")
code_coverage_summary
```

To see nice report in `DT`:


```{r,eval=FALSE}
covr::report(code_coverage_summary)
```

There are also many CI/CD solutions online to track test coverage:

* [`coveralls`](https://coveralls.io) - see example: https://coveralls.io/github/Tazovsky/cachemeR?branch=devel
* [`codecov`](https://codecov.io)

# Practice 

## Task #1

Run `covr::package_coverage("unitTestsWorkshopPackage/")`
